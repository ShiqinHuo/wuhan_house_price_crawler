# wuhan_house_price_crawler
æ­¦æ±‰ä¸œæ¹–é«˜æ–°ç‰‡åŒºæˆ¿ä»·çˆ¬è™«ã€‚data source: æˆ¿å¤©ä¸‹

### Aim

å¯èƒ½è¦å›å›½å°±ä¸š, è€ƒè™‘åˆ°æ­¦æ±‰çš„äº’è”ç½‘å¤§å‚é›†ä¸­åœ¨ä¸œæ¹–é«˜æ–°å¤§å…‰è°·ç‰‡åŒº, é€šå‹¤ä¸æ˜¯å¾ˆæ–¹ä¾¿(æ‘/ä¸‰ç¯å¤–), åº”è¯¥ä¼šäº§ç”Ÿå°±è¿‘è´­æˆ¿çš„éœ€æ±‚, æå‰å†™äº†ä¸€ä¸ªç®€å•çš„çˆ¬è™«, æ•°æ®æ¥æºæ˜¯[æˆ¿å¤©ä¸‹](https://wuhan.esf.fang.com/house-a013126)

### Report

* [ä¸œæ¹–é«˜æ–°äºŒæ‰‹æˆ¿ä¿¡æ¯æ±‡æ€»_Double.csv](https://github.com/ShiqinHuo/wuhan_house_price_crawler/blob/master/all_info/%E4%B8%9C%E6%B9%96%E9%AB%98%E6%96%B0%E4%BA%8C%E6%89%8B%E6%88%BF%E4%BF%A1%E6%81%AF%E6%B1%87%E6%80%BB_Double.csv)
  * æ€»å…±çˆ¬å–100é¡µæ•°æ®å…±è®¡6000æ¡, å…¶ä¸­æœ‰æ•ˆæ•°æ®5877æ¡
* [ä¸œæ¹–é«˜æ–°å…¬å¯“æ±‡æ€»_Double.csv](https://github.com/ShiqinHuo/wuhan_house_price_crawler/blob/master/all_info/%E4%B8%9C%E6%B9%96%E9%AB%98%E6%96%B0%E5%85%AC%E5%AF%93%E6%B1%87%E6%80%BB_Double.csv)
  * æœ‰æ•ˆæ•°æ®5877æ¡ä¸­æœ‰5614æ¡å‡ä¸ºå…¬å¯“
* [ä¸œæ¹–é«˜æ–°åˆ«å¢…æ±‡æ€»_Double.csv](https://github.com/ShiqinHuo/wuhan_house_price_crawler/blob/master/all_info/%E4%B8%9C%E6%B9%96%E9%AB%98%E6%96%B0%E5%88%AB%E5%A2%85%E6%B1%87%E6%80%BB_Double.csv) 
  * ä»…æœ‰263æ¡åˆ«å¢…è®°å½• 
* å¯è§†åŒ–åˆ†ææŠ¥å‘Šåç»­ä¼šæ›´è¿›
  * [å°åŒºä¸­ä½å•ä»·å¯è§†åŒ–æ”¾å¤§å›¾](https://github.com/ShiqinHuo/wuhan_house_price_crawler/blob/master/%E5%B0%8F%E5%8C%BA%E4%B8%AD%E4%BD%8D%E5%8D%95%E4%BB%B7%E5%8F%AF%E8%A7%86%E5%8C%96%E6%94%BE%E5%A4%A7%E5%9B%BE.md)
    * ç¤ºä¾‹å¦‚ä¸‹, æŸ¥çœ‹å…¨éƒ¨æ”¾å¤§å›¾è¯·ç‚¹ğŸ‘†é“¾æ¥
    * <div align="center"><img src="https://github.com/ShiqinHuo/wuhan_house_price_crawler/blob/master/zoom_res/zoom1.png" width="200" alt="ä¸­ä½å•ä»·æ”¾å¤§å›¾1" ><img src="https://github.com/ShiqinHuo/wuhan_house_price_crawler/blob/master/zoom_res/detail1.png" width="600" alt="ä¸­ä½å•ä»·å¯è§†åŒ–æ”¾å¤§å›¾1" ></div>
  * [ä¸­ä½å•ä»·æ¡å½¢å›¾ byå°åŒº](https://github.com/ShiqinHuo/wuhan_house_price_crawler/blob/master/%E5%B0%8F%E5%8C%BA%E4%B8%AD%E4%BD%8D%E5%8D%95%E4%BB%B7%E6%9D%A1%E5%BD%A2%E5%9B%BE.md)
    * ç¤ºä¾‹å¦‚ä¸‹, æŸ¥çœ‹å…¨éƒ¨æ¡å½¢å›¾è¯·ç‚¹ğŸ‘†é“¾æ¥
     ![å°åŒºä¸­ä½å•ä»·æ¡å½¢å›¾1](https://github.com/ShiqinHuo/wuhan_house_price_crawler/blob/master/community_bar/%E5%B0%8F%E5%8C%BA%E4%B8%AD%E4%BD%8D%E5%8D%95%E4%BB%B7%E6%9D%A1%E5%BD%A2%E5%9B%BE1.png)
   * [å°åŒºä¸­ä½å•ä»·è¡¨ byå¹´ä»½](https://github.com/ShiqinHuo/wuhan_house_price_crawler/blob/master/%E5%B0%8F%E5%8C%BA%E4%B8%AD%E4%BD%8D%E5%8D%95%E4%BB%B7%E8%A1%A8by%E5%B9%B4%E4%BB%BD.md)
     * ç¤ºä¾‹å¦‚ä¸‹, æŸ¥çœ‹å…¨éƒ¨æŠ¥è¡¨è¯·ç‚¹ğŸ‘†é“¾æ¥
    * ![å°åŒºä¸­ä½å¹´ä»½å•ä»·è¡¨1](https://github.com/ShiqinHuo/wuhan_house_price_crawler/blob/master/years_pic/%E5%B0%8F%E5%8C%BA%E4%B8%AD%E4%BD%8D%E5%8D%95%E4%BB%B7%E5%B9%B4%E4%BB%BD%E8%A1%A81.png)




### Requirements

```python
import os
import requests
from lxml import html, etree
from bs4 import BeautifulSoup
import pandas # for data cleaning
```
### project structure

<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>root/
â”œâ”€â”€ all_info/
â”‚   â”œâ”€â”€ all_fang_info
â”‚   â”œâ”€â”€ data_cleaning.ipynb
â”‚   â”œâ”€â”€ data_cleaning.py
â”‚   â”œâ”€â”€ ä¸œæ¹–é«˜æ–°äºŒæ‰‹æˆ¿ä¿¡æ¯æ±‡æ€»_Double.csv
â”œâ”€â”€ huawei_crawler.py
â”œâ”€â”€ read_fang.py
â”œâ”€â”€ picture/
â”œâ”€â”€ temp/
â”‚   â”œâ”€â”€ temp_1
â”‚   â”œâ”€â”€ temp_100
â”œâ”€â”€ downloads/
â”‚   â”œâ”€â”€ fang_page_1
â”‚   â”œâ”€â”€ fang_page_100
</pre></div>
</div>


### XPathè§£æHTML
```python
# æ ‡é¢˜ //*[@id="kesfqbfylb_A01_01_62"]/dd[1]/h4/a/span
# æˆ·å‹ //*[@id="kesfqbfylb_A01_01_62"]/dd[1]/p[1]/text()[1]
# é¢ç§¯ //*[@id="kesfqbfylb_A01_01_62"]/dd[1]/p[1]/text()[2]
# æ¥¼å±‚ //*[@id="kesfqbfylb_A01_01_62"]/dd[1]/p[1]/text()[3]
# æœå‘ //*[@id="kesfqbfylb_A01_01_62"]/dd[1]/p[1]/text()[4]
# å¹´ä»½ //*[@id="kesfqbfylb_A01_01_62"]/dd[1]/p[1]/text()[5]
# æ€»ä»· //*[@id="kesfqbfylb_A01_01_62"]/dd[2]/span[1]/b
# å•ä»· //*[@id="kesfqbfylb_A01_01_62"]/dd[2]/span[2]
# åœ°å€ //*[@id="kesfqbfylb_A01_01_62"]/dd[1]/p[2]/span
# å°åŒº //*[@id="kesfqbfylb_A01_01_62"]/dd[1]/p[2]/a/@title
```
